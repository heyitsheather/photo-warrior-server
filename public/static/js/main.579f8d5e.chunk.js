(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,n){e.exports=n(72)},39:function(e,t,n){},60:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),l=n.n(o),c=n(76),i=(n(39),n(2)),s=n(3),u=n(5),h=n(4),m=n(6),p=n(77),d=n(73),E=n(10),g=n.n(E),f=(n(60),n(74)),b=n(15),O=n(75),y=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={email:"",originalPassword:""},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"genericSync",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(b.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),g.a.post("/api/login",this.state,{withCredentials:!0}).then(function(e){console.log("Login Page",e.data);var n=e.data.userDoc;t.props.onUserChange(n)}).catch(function(e){console.log("Login Page ERROR",e),alert("Sorry! Something went wrong.")})}},{key:"render",value:function(){var e=this;return this.props.currentUser?r.a.createElement(O.a,{to:"/user-dashboard"}):r.a.createElement("section",{className:"LoginPage"},r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("label",null,r.a.createElement("input",{value:this.state.email,onChange:function(t){return e.genericSync(t)},type:"email",name:"email",placeholder:"EXAMPLE@PHOTOWARRIOR.COM"})),r.a.createElement("label",null,r.a.createElement("input",{value:this.state.originalPassword,onChange:function(t){return e.genericSync(t)},type:"password",name:"originalPassword",placeholder:"PASSWORD"})),r.a.createElement("button",null,"Log In")))}}]),t}(a.Component),v=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"PHOTO WARRIOR"),r.a.createElement(y,{currentUser:this.props.currentUser,onUserChange:this.props.onUserChange}),r.a.createElement("p",null,r.a.createElement(f.a,{to:"/signup-page"},"Not a warrior yet?  SIGN UP.")))}}]),t}(a.Component),j=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"NotFound"},r.a.createElement("h2",null,"404 Not Found"),r.a.createElement("p",null,"Sorry, the page you are looking for doesn't exist."))}}]),t}(a.Component),U=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={fullName:"",email:"",originalPassword:""},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"genericSync",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(b.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),g.a.post("/api/signup",this.state,{withCredentials:!0}).then(function(e){console.log("Signup Page",e.data);var n=e.data.userDoc;t.props.onUserChange(n)}).catch(function(e){console.log("Signup Page ERROR",e),alert("Sorry! Something went wrong.")})}},{key:"render",value:function(){var e=this;return this.props.currentUser?r.a.createElement("section",{className:"SignupPage"},r.a.createElement("h2",null,"You are signed up!"),r.a.createElement("p",null,"Welcome, ",this.props.currentUser.fullName,"! Your user ID is ",r.a.createElement("b",null,this.props.currentUser._id,"."))):r.a.createElement("section",{className:"SignupPage"},r.a.createElement("h2",null,"Sign Up"),r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("label",null,"Full Name:",r.a.createElement("input",{value:this.state.fullName,onChange:function(t){return e.genericSync(t)},type:"text",name:"fullName",placeholder:"Rey"})),r.a.createElement("label",null,"Email:",r.a.createElement("input",{value:this.state.email,onChange:function(t){return e.genericSync(t)},type:"email",name:"email",placeholder:"rey@jedi.com"})),r.a.createElement("label",null,"Password:",r.a.createElement("input",{value:this.state.originalPassword,onChange:function(t){return e.genericSync(t)},type:"password",name:"originalPassword",placeholder:"****"})),r.a.createElement("button",null,"Sign Up")))}}]),t}(a.Component),C=n(33),R=n(29),S=n.n(R),A=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_SERVER_URL:"",REACT_APP_CLOUDINARY_UPLOAD_PRESET:"eybabtgx",REACT_APP_CLOUDINARY_UPLOAD_URL:"https://api.cloudinary.com/v1_1/dbt9uvnc4/image/upload"}),w=A.REACT_APP_CLOUDINARY_UPLOAD_PRESET,P=A.REACT_APP_CLOUDINARY_UPLOAD_URL,L=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={uploadedFiles:[]},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onImageDrop",value:function(e,t){var n=this;console.log("halp",e,t),e.forEach(function(e,t){n.handleImageUpload(e,t)})}},{key:"handleImageUpload",value:function(e,t){var n=this;S.a.post(P).field("upload_preset",w).field("file",e).field("folder","user-"+this.props.currentUser.email).end(function(a,r){a&&console.error(a),""!==r.body.secure_url&&(console.log("cloudinary----------",r.body),g.a.post("/api/photos",{url:r.body.secure_url,width:r.body.width,height:r.body.height},{withCredentials:!0}).then(function(){var a=n.state.uploadedFiles;a[t]={file:e,cloudinaryUrl:r.body.secure_url},n.setState({uploadedFiles:a})}).catch(function(e){console.log("Upload Image ERROR",e),alert("Sorry! Photos did not upload.")}))})}},{key:"render",value:function(){return r.a.createElement("form",null,r.a.createElement("div",{className:"FileUpload"},r.a.createElement(C.a,{onDrop:this.onImageDrop.bind(this),multiple:!0,accept:"image/*"},r.a.createElement("div",null,"DROP IMAGES HERE",r.a.createElement("br",null),"OR",r.a.createElement("br",null),"CLICK TO UPLOAD"))),r.a.createElement("div",null,this.state.uploadedFiles.map(function(e){return""===e.cloudinaryUrl?null:r.a.createElement(O.a,{to:"/prepare-for-battle"})})))}}]),t}(a.Component),k=n(16),N=n(14),I=n(30),D=function(e){var t=e.selected;return r.a.createElement("div",{style:t?{left:"4px",top:"4px",position:"absolute",zIndex:"1"}:{display:"none"}},r.a.createElement("svg",{style:{fill:"white",position:"absolute"},width:"24px",height:"24px"},r.a.createElement("circle",{cx:"12.5",cy:"12.2",r:"8.292"})),r.a.createElement("svg",{style:{fill:"#06befa",position:"absolute"},width:"24px",height:"24px"},r.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})))},T={transition:"transform .135s cubic-bezier(0.0,0.0,0.2,1),opacity linear .15s"},_={transform:"translateZ(0px) scale3d(0.9, 0.9, 1)",transition:"transform .135s cubic-bezier(0.0,0.0,0.2,1),opacity linear .15s"},x={backgroundColor:"#eee",cursor:"pointer",overflow:"hidden",position:"relative"},Y=function(e){var t=e.index,n=e.onClick,a=e.photo,o=e.margin,l=e.direction,c=e.top,i=e.left,s=(100-30/a.width*100)/100,u=(100-30/a.height*100)/100;return _.transform="translateZ(0px) scale3d(".concat(s,", ").concat(u,", 1)"),"column"===l&&(x.position="absolute",x.left=i,x.top=c),r.a.createElement("div",{style:Object(k.a)({margin:o,height:a.height,width:a.width},x),className:a.selected?"":"not-selected"},r.a.createElement(D,{selected:!!a.selected}),r.a.createElement("img",Object.assign({style:a.selected?Object(k.a)({},T,_):Object(k.a)({},T)},a,{onClick:function(e){return n(e,{index:t,photo:a})}})),r.a.createElement("style",null,".not-selected:hover{outline:2px solid #06befa}"))},G=n(32),F=n.n(G),H=document.createElement("div");document.body.appendChild(H);var W=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"CONGRATULATIONS, YOU HAVE DEFEATED THE GALLERY!"),r.a.createElement(F.a,{filename:"myfile.txt",exportFile:function(){return Promise.resolve("My cached data")}},"Save to disk"))}}]),t}(r.a.Component),M=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={selectAll:!1,photoArray:null},n.selectPhoto=n.selectPhoto.bind(Object(N.a)(Object(N.a)(n))),n.toggleSelect=n.toggleSelect.bind(Object(N.a)(Object(N.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getNext6()}},{key:"getNext6",value:function(){var e=this;g.a.get("/api/photos",{withCredentials:!0}).then(function(t){console.log("Photo List",t.data);var n=t.data.map(function(e){return{src:e.url,width:e.width,height:e.height,_id:e._id}});e.setState({photoArray:n})}).catch(function(e){console.log("Photo List ERROR",e),alert("Sorry! Something went wrong.")})}},{key:"selectPhoto",value:function(e,t){var n=this.state.photoArray;n[t.index].selected=!n[t.index].selected,this.setState({photoArray:n}),console.log(this.state)}},{key:"toggleSelect",value:function(){var e=this,t=this.state.photoArray.map(function(t,n){return Object(k.a)({},t,{selected:!e.state.selectAll})});this.setState({photoArray:t,selectAll:!this.state.selectAll})}},{key:"submitSelected",value:function(){var e=this,t=[],n=[];this.state.photoArray.forEach(function(e){e.selected?t.push(e._id):n.push(e._id)}),console.log("submitting!!",{selectedIds:t,seenIds:n}),g.a.put("/api/photos",{selectedIds:t,seenIds:n},{withCredentials:!0}).then(function(t){alert("Submission successful!"),e.getNext6()}).catch(function(e){console.log("Photo SUBMIT ERROR",e),alert("Sorry! Something went wrong.")})}},{key:"showGallery",value:function(){var e=this.state.photoArray;return e?0===e.length?r.a.createElement("div",null,r.a.createElement(O.a,{to:"/gallery-defeated"})):r.a.createElement(I.a,{photos:e,onClick:this.selectPhoto,ImageComponent:Y,direction:"row"}):r.a.createElement("h1",null,"Loading...")}},{key:"render",value:function(){var e=this;return console.log(this.state),r.a.createElement("div",null,r.a.createElement("h1",null,"WHICH OF THESE PHOTOS SHOULD SURVIVE?"),r.a.createElement("button",{onClick:function(){return e.submitSelected()}},"SUBMIT SELECTIONS AND CONTINUE TO NEXT BATCH"),this.showGallery())}}]),t}(r.a.Component),B=n(65),V=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"WELCOME WARRIOR"),r.a.createElement("button",null,"LOGOUT"),r.a.createElement("button",null,r.a.createElement(B.a,{to:"/drag-and-drop"},"UPLOAD A NEW GALLERY")),r.a.createElement("h2",null,"YOUR GALLERIES:"),r.a.createElement(B.a,{to:"/prepare-for-battle"},r.a.createElement("div",{id:"photoDisplay"},r.a.createElement("h3",null,"PARIS GALLERY"))))}}]),t}(a.Component),z=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"READY FOR BATTLE?"),r.a.createElement("button",null,r.a.createElement(B.a,{to:"/drag-and-drop"},"UPLOAD A NEW GALLERY")),r.a.createElement("button",null,r.a.createElement(B.a,{to:"/choose-photos"},"BRING IT ON")))}}]),t}(a.Component),X=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"CONGRATULATIONS! YOU HAVE DEFEATED THE GALLERY."),r.a.createElement("button",null,"EXPORT"))}}]),t}(a.Component),J=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={currentUser:null},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.get("/api/checkuser",{withCredentials:!0}).then(function(t){console.log("Check User",t.data);var n=t.data.userDoc;e.syncCurrentUser(n)}).catch(function(e){console.log("Check User ERROR",e),alert("Sorry! Something went wrong.")})}},{key:"syncCurrentUser",value:function(e){this.setState({currentUser:e})}},{key:"logoutClick",value:function(){var e=this;g.a.delete("/api/logout",{withCredentials:!0}).then(function(){e.syncCurrentUser(null)}).catch(function(e){console.log("Logout ERROR",e),alert("Sorry! Something went wrong.")})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(p.a,null,r.a.createElement(d.a,{exact:!0,path:"/",render:function(){return r.a.createElement(v,{currentUser:e.state.currentUser,onUserChange:function(t){return e.syncCurrentUser(t)}})}}),r.a.createElement(d.a,{path:"/drag-and-drop",render:function(){return r.a.createElement(L,{currentUser:e.state.currentUser})}}),r.a.createElement(d.a,{path:"/choose-photos",component:M}),r.a.createElement(d.a,{path:"/user-dashboard",component:V}),r.a.createElement(d.a,{path:"/prepare-for-battle",component:z}),r.a.createElement(d.a,{path:"/export-photos",component:X}),r.a.createElement(d.a,{path:"/gallery-defeated",component:W}),r.a.createElement(d.a,{path:"/signup-page",render:function(){return r.a.createElement(U,{currentUser:e.state.currentUser,onUserChange:function(t){return e.syncCurrentUser(t)}})}}),r.a.createElement(d.a,{path:"/login-page",render:function(){return r.a.createElement(y,{currentUser:e.state.currentUser,onUserChange:function(t){return e.syncCurrentUser(t)}})}}),r.a.createElement(d.a,{component:j})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(c.a,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[34,2,1]]]);
//# sourceMappingURL=main.579f8d5e.chunk.js.map